%--------------------------------------------------------------------------
%   [output] = auto_scale(sig,AD_len)
%--------------------------------------------------------------------------
%   功能:
%   将输入数据的最大值按照ADC的位宽进行量化(常用于FPGA数据测试中)
%--------------------------------------------------------------------------
%   输入:
%           sig                 需要被量化的信号信号                 
%           AD_len              ADC位宽
%   输出:
%           output              int型输出信号，并按照位宽量化
%--------------------------------------------------------------------------
%   例子:
%   sig = [-10 -5 -3 -1 1 2 3 4 8];
%   [output] = auto_scale(sig,10)
%   output =
%     -511  -256  -153   -51    51   102   153   204   409
%--------------------------------------------------------------------------
function [output] = auto_scale(sig,AD_len)
sig = sig./max(abs(sig));
output = round(sig .* (2^(AD_len-1)-1));
end